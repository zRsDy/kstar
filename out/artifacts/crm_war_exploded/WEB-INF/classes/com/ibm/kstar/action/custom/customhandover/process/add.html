<#escape x as x?html>
<@pui.body>
	<@form.panel title="${i18n.get('新增')}/${i18n.get('编辑')}">
	<@form.form id="t1" success="function(){ parent.currentParent.reload_handoverList(); }" class="form-horizontal" >
		
		<input id="handoverCode" name="handoverCode" type="hidden"  value="${(customHandoverProc.handoverCode)!}">
		<input id="userId" name="userId" type="hidden"  value="${userId!}">
		<div class="form-group" >
			<label class="col-sm-3 control-label no-padding-right" > 
				${i18n.get('商机编号')} : 
			</label>
			
			<input id="businessOppoCode" name="businessOppoCode" type="hidden"  value="${(customHandoverProc.businessOppoCode)!}">
			<@form.autocomplete  id="bizoppName" name="bizoppName" 
				idKey='opportunityName'
				style="width: 145px;"
				formatResult="function(data) {return '<div >' +data.opportunityName + '</div>';}"
				url="function(){ 
				
					return '${ctx}/lovcustom/autocompleteBizOppByUser.html?userId=${(userId)!}'; 
				
				}"
				value="{opportunityName:'${(customHandoverProc.bizoppName)!}'
					, number:'${(customHandoverProc.businessOppoCode)!}'
				}"
				
				onSelect="function(data){
					if( data.number != null && data.number !='' && data.number != 'undefined'){
						$('#businessOppoCode').val(data.number);
					}
				}" 
			/>
		</div>
		<div class="form-group" >
			<label class="col-sm-3 control-label no-padding-right" > 
				${i18n.get('合同编号')} : 
			</label>
			
			<input id="contractCode" name="contractCode" type="hidden"  value="${(customHandoverProc.contractCode)!}">
			<@form.autocomplete  id="contractName" name="contractName" 
				idKey='contrName'
				style="width: 145px;"
				formatResult="function(data) {return '<div >' +data.contrName + '</div>';}"
				url="function(){ 
				
					return '${ctx}/lovcustom/autocompleteContractByUser.html?userId=${(userId)!}'; 
				
				}"
				value="{contrName:'${(customHandoverProc.contractName)!}'
					, contrNo:'${(customHandoverProc.contractCode)!}'
				}"
				
				onSelect="function(data){
					if( data.contrNo != null && data.contrNo !='' && data.contrNo != 'undefined'){
						$('#contractCode').val(data.contrNo);
					}
				}" 
			/>
		</div>
		<div class="form-group" >
			<label class="col-sm-3 control-label no-padding-right" > 
				<strong style="color: red;">*</strong>${i18n.get('未尽事项')} : 
			</label>
			<@form.input
			id="goingonProc"  
			name="goingonProc" 
			placeholder="" 
			required="${i18n.get('不能为空！')}"
			tip="" 
			value="${(customHandoverProc.goingonProc)!}" 
			/>
		</div>
		<div class="form-group" >
			<label class="col-sm-3 control-label no-padding-right" > 
				${i18n.get('详细描述')} : 
			</label>
			<@form.input
			id="comment"  
			name="comment" 
			placeholder="" 
			tip="" 
			value="${(customHandoverProc.comment)!}" 
			/>
		</div>
		<div class="form-group" >
			<label class="col-sm-3 control-label no-padding-right" > 
				<strong style="color: red;">*</strong>${i18n.get('后续工作及对接人')} : 
			</label>
			<@form.input
			id="continueBy"  
			name="continueBy" 
			placeholder="" 
			required="${i18n.get('不能为空！')}"
			tip="" 
			value="${(customHandoverProc.continueBy)!}" 
			/>
		</div>
		<div class="form-group" >
			<label class="col-sm-3 control-label no-padding-right" > 
				${i18n.get('已完成')}: 
			</label>
			<@form.select  style="width: 147px;"
				id="finishFlg" name="finishFlg" 
				code="COMMONYN" 
				value ="${(customHandoverProc.finishFlg)!}"
			/>
		</div>
		
		
		<div class="hr hr-18 dotted hr-double"></div>
		<div class="clearfix form-actions">
			<div class="col-md-offset-5 col-md-7">
				<button class="btn btn-info submit" type="button">
					<i class="icon-ok bigger-110"></i>
					${i18n.get('保存')}
				</button>
				&nbsp; &nbsp; &nbsp;
				<button class="btn" type="button" onclick="javascript:api.close()">
					<i class="icon-undo bigger-110"></i>
				${i18n.get('关闭')}
				</button>
			</div>
		</div>
	</@form.form>
	</@form.panel>
</@pui.body>
</#escape>